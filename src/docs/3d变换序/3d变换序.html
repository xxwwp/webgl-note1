<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3D变换序</title>
    <link rel="stylesheet" href="../../assets/global.css" />
    <script src="../../assets/global.js" defer></script>
  </head>
  <body>
    <article class="article">
      <h1>3D变换序</h1>
      <hr />

      <p>
        计算机渲染 3D
        场景实际上和我们在现实生活中拍摄照片或录像类似。比如拍摄一张照片，首先我们要让被拍摄的人或事物摆好姿势，这个过程放到计算机中就是<strong>模型变换</strong>，这个过程对应了渲染时对物体进行的缩放位移和旋转等操作。等到大家摆好了姿势，现在就需要摆放摄像机的位置和角度，这部分操作会决定最后成像的方向，在计算机中被称作<strong>视图变换或相机变换</strong>。最后就是如何决定成像的区域，现实生活中就有很多不同的成像区域，比如平角或者广角，这个过程在计算中被描述成<strong>投影变换</strong>，即把拍摄的区域映射到一个平面上。
      </p>

      <p>
        所以 3D 变换一共涉及三个过程：模型变换、视图变换（相机变换）、投影变换，英文一般简称为 MVP
        变换（model、view、projection），MVP 变换和渲染没有直接的关系，例如光照、阴影、着色都不在 MVP 变换过程中，MVP
        变换只是处理了所有顶点最后渲染时的位置。
      </p>

      <h2>模型变换</h2>

      <p>
        模型变换就是在渲染一个物体时，确定物体在场景中如何摆放的过程，一般情况下涉及到物体的旋转缩放和位移，通过常用的变换矩阵即可实现。
      </p>

      <h2>视图变换</h2>

      <p>
        在视图变换中，需要确定空间中相机所在的位置，相机正对的方向，还有相机向上的方向一共三个值。前两个好理解，确定相机向上的方向其实就类似我们拍照时，手机横着拿斜着拿竖着拿一样，最后的结果并不一样。
      </p>

      <h2>投影变换</h2>

      <p>
        投影变换决定了拍摄的区域如何投影到屏幕上，最直接的例子比如平角相机和广角相机，物体不动，相机不动，平角和广角相机照相出来的效果却不一样。
      </p>

      <p>投影变换下有两个分支，<strong>正交投影</strong>和<strong>透视投影</strong>。</p>

      <p>
        <strong>正交投影没有远近感</strong
        >，无论物体多远多近，最后成像的大小都取决于物体实际的大小。正交投影比较常见的用途就是工程制图和小学学习的三视图。对场景进行正交投影时，Z
        轴方向的值就是提供前后顺序，并不会缩放物体。
      </p>

      <p>
        <strong>透视投影有远近感，</strong>是我们常见的远小近大的成像效果，更符合人的直觉。透视投影时，顶点依赖 Z
        轴大小对 X 和 Y 轴分量进行缩放，这并不是简单的线性关系。
      </p>

      <h2>小结</h2>

      <p>
        不难发现，webgl 默认就是使用正交投影进行成像，当我们修改一个顶点 Z 轴大小时，并没有远小近大的效果，webgl
        会直接使用 X Y 分量直接进行绘制。当我们设置一个顶点 Z 轴分量大于 1 或者小于 -1
        时，这个顶点会因为超出与渲染区域不再绘制。
      </p>
    </article>
  </body>
</html>
